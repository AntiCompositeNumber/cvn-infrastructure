global:
  - debian:
    - git
    - nano

webserver:
  - debian:
    - apache2

stillalive:
  - source: 'https://github.com/countervandalism/stillalive'
  - debian:
    - php5-cli

CVNBot:
  - source: 'https://github.com/countervandalism/CVNBot'
  - debian:
    - mono-complete

CVNClerkBot:
  - source: 'https://github.com/countervandalism/CVNClerkBot'
  - debian:
    - python@2.7.3
    - subversion
    - mysql-server
    - mysql-client
    - python-twisted-words
    - python-mysqldb
  - raw:
    - 'https://www.mediawiki.org/wiki/Manual:Pywikipediabot'
    - 'https://github.com/Krinkle/ts-krinkle-pywiki'
  - prepare:
    - database:
      - shell: |
        mysql -u root -proot -e 'CREATE DATABASE cvnclerkbot;'
  - backup:
    - database:
      - shell: |
        mysqldump cvnclerkbot -u root -proot --extended-insert=FALSE > mysql_cvnclerkbot.sql
  - restore:
    - database:
      - shell: |
        mysql -u root -proot cvnclerkbot < mysql_cvnclerkbot.sql
